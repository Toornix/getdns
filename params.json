{
  "name": "GetDNS",
  "tagline": "Query DNS Records From DnsDB.io",
  "body": "# GetDNS\r\n\r\n[![build-status-image]][travis]\r\n[![coverage-status-image]][codecov]\r\n[![pypi-version]][pypi]\r\n[![python-version]][pypi]\r\n[![license]][pypi]\r\n[![Join the chat at https://gitter.im/getdns/Lobby](https://badges.gitter.im/getdns/Lobby.svg)](https://gitter.im/getdns/Lobby?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge)\r\n\r\n**GetDNS** 是一个使用DnsDB API查询DNS记录命令行工具。\r\n\r\n# Dependencies\r\n\r\n* [DnsDB Python SDK](https://pysdk.dnsdb.io)\r\n\r\n# Install\r\n\r\n```shell\r\npip install --upgrade dnsdb-getdns\r\n```\r\n\r\n# Usage\r\n\r\n1. 查看帮助\r\n\r\n    ```shell\r\ngetdns -h\r\n    ```\r\n\r\n# Commands\r\n\r\n可用子命令\r\n\r\n* config 更改配置\r\n* search 查询DNS\r\n* bulk-search 批量查询DNS\r\n* resources 获取当前账号资源信息(API剩余请求次数)\r\n\r\n查看子命令帮助\r\n\r\n```shell\r\ngetdns <command> -h\r\n```\r\n\r\n## config\r\n\r\n`config`命令用于配置默认的用户名和密码(DnsDB账号)，配置该项可以让您在使用`search`，`bulk-search`，`resources`命令时无需再次输入用户名和密码\r\n\r\n```shell\r\ngetdns config -u <your username> -p <your password>\r\n```\r\n\r\n查看当前配置\r\n\r\n```shell\r\ngetdns config --show\r\n```\r\n\r\n恢复默认配置\r\n\r\n```shell\r\ngetdns config --reset\r\n```\r\n\r\n配置代理:\r\n\r\n1. HTTP代理\r\n\r\n    ```shell\r\n    getdns config --proxy http://user:pass@host:port\r\n    ```\r\n\r\n2. SOCKS5代理\r\n\r\n    ```shell\r\n    getdns config --proxy socks5://user:pass@host:port\r\n    ```\r\n\r\n## search\r\n\r\n`search`命令用于查询dns记录。没有使用`-a`或`--all`参数时，该命令每成功执行一次扣除当前账号一次API请求次数,  且每次执行最多返回30条查询结果\r\n\r\n```shell\r\ngetdns search --domain example.com\r\n```\r\n\r\n`-o`参数用于指定输出位置, 默认为`-`, 表示输出到标准输出(`stdout`), 也可以输入到文件中\r\n\r\n```shell\r\ngetdns search --domain example.com -o dns-output.txt\r\n```\r\n\r\n`a`或`--all`参数将会返回全部查询结果, 每次查询会根据结果数扣除当前账号的API请求次数\r\n\r\n```shell\r\ngetdns search --domain example.com  -a -o dns-output.txt\r\n```\r\n\r\n`-m`或`--max`参数限制最多输出查询结果数量。例如限制最多输出5条查询结果：\r\n\r\n```shell\r\ngetdns search --domain example.com -a --max 5\r\n```\r\n\r\n### Output Format\r\n\r\n`search`命令可以通过以下参数改变输出格式(`bulk-search`命令同样适用以下参数)\r\n\r\n* `--json`指定输出格式为`JSON`，这是默认选项。\r\n* `--csv`指定输出格式为`CSV`。\r\n* `--format <format-string>`自定义输出格式。在`<format-string>`中，`#{host}`将会被DNS记录的host替换，`#{type}`将会被DNS记录的type替换，`#{value}`将会被DNS记录的value替换，其他内容将会被保留。例如:\r\n    \r\n    ```shell\r\n    getdns search --domain exmpale.com --format \"host:#{host}, type:#{type}, value:#{value}\"\r\n    ```\r\n\r\n## bulk-search\r\n\r\n`bulk-search`用于批量查询DNS记录。\r\n\r\n`bulk-search`针对每次查询默认输出全部查询结果，可以通过`--max`限制每次查询输出的最大查询结果数量。\r\n\r\n`bulk-search`默认通过标准输入(`stdin`)获取查询条件, 每行表示一个查询条件, 可以通过`-i`参数指定其他文件作为输入文件。\r\n\r\n`--data-type`指定输入条件的类型, 默认为`domain`, 其他可选值为`host`, `ip`。\r\n\r\n通过标准输入(`stdin`)查询域名\r\n\r\n```shell\r\ngetdns bulk-search\r\nstdin>>example.com\r\n```\r\n\r\n以文件查询输入条件\r\n\r\n假设存在一个domain.txt文件， 内容如下:\r\n\r\n```\r\na.com\r\nb.com\r\nc.com\r\n```\r\n\r\n批量查询该文件中的域名的DNS记录\r\n\r\n```shell\r\ngetdns bulk-search -i domain.txt -o output.txt\r\n```\r\n或\r\n\r\n```shell\r\ncat domain.txt | getdns bulk-search -o output.txt\r\n```\r\n\r\n根据IP批量查询解析到该IP的DNS记录\r\n假设有文件ip.txt, 内容如下：\r\n```\r\n111.111.111.111\r\n222.222.222.222\r\n```\r\n\r\n```shell\r\ngetdns bulk-search -i domain.txt -o output.txt --data-type ip\r\n```\r\n或\r\n\r\n```shell\r\ncat domain.txt | getdns bulk-search -o output.txt --data-type ip\r\n```\r\n\r\n### Output Format\r\n\r\n同`search`命令\r\n\r\n## resources\r\n\r\n查看剩余API请求次数\r\n\r\n```shell\r\ngetdns resources\r\n```\r\n\r\n# FAQ\r\n\r\n1. Mac OS X 使用getdns命令遇到下面错误，您可以查看[这里](https://github.com/dnsdb-team/dnsdb-python-sdk/wiki/Tutorials#%E5%AE%89%E8%A3%85%E5%88%B0mac-os-x)\r\n\r\n    ```shell\r\nrequests.exceptions.SSLError: [SSL: SSLV3_ALERT_HANDSHAKE_FAILURE] sslv3 alert handshake failure (_ssl.c:590)\r\n    ```\r\n\r\n# 相关链接\r\n\r\n* [DnsDB 官网](https://dnsdb.io)\r\n* [DnsDB Python SDK](https://pysdk.dnsdb.io)\r\n* [DnsDB API服务](https://dnsdb.io/apiservice)\r\n\r\n[build-status-image]: https://img.shields.io/travis/dnsdb-team/getdns/master.svg\r\n[travis]: https://travis-ci.org/dnsdb-team/getdns\r\n[coverage-status-image]: https://img.shields.io/codecov/c/github/dnsdb-team/getdns/master.svg\r\n[codecov]: http://codecov.io/github/dnsdb-team/getdns?branch=master\r\n[pypi-version]: https://img.shields.io/pypi/v/dnsdb-getdns.svg\r\n[pypi]: https://pypi.python.org/pypi/dnsdb-getdns\r\n[python-version]: https://img.shields.io/pypi/pyversions/dnsdb-getdns.svg\r\n[license]: https://img.shields.io/pypi/l/dnsdb-getdns.svg",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}